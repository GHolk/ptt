<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Re: [問卦] C語言沒人用goto? - 看板 Gossiping - 批踢踢實業坊</title>
<meta name="robots" content="all">
<meta name="keywords" content="Ptt BBS 批踢踢">
<meta name="description" content="        這文有點久 講下本人經驗
        若你代碼 有很多初始化與階斷性處理
        那就用goto吧
        ex:
狀態 搖桿已初始 = 否;
">
<meta property="og:site_name" content="Ptt 批踢踢實業坊">
<meta property="og:title" content="Re: [問卦] C語言沒人用goto?">
<meta property="og:description" content="        這文有點久 講下本人經驗
        若你代碼 有很多初始化與階斷性處理
        那就用goto吧
        ex:
狀態 搖桿已初始 = 否;
">
<link rel="canonical" href="https://www.ptt.cc/bbs/Gossiping/M.1513576988.A.940.html">

<link rel="stylesheet" type="text/css" href="bbs-common.css">
<link rel="stylesheet" type="text/css" href="bbs-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="bbs-custom.css">
<link rel="stylesheet" type="text/css" href="pushstream.css" media="screen">
<link rel="stylesheet" type="text/css" href="bbs-print.css" media="print">




	</head>
    <body>
		
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="topbar-container">
	<div id="topbar" class="bbs-content">
		<a id="logo" href="http://www.ptt.cc/">批踢踢實業坊</a>
		<span>&rsaquo;</span>
		<a class="board" href="http://www.ptt.cc/bbs/Gossiping/index.html"><span class="board-label">看板 </span>Gossiping</a>
		<a class="right small" href="http://www.ptt.cc/about.html">關於我們</a>
		<a class="right small" href="http://www.ptt.cc/contact.html">聯絡資訊</a>
	</div>
</div>
<div id="navigation-container">
	<div id="navigation" class="bbs-content">
		<a class="board" href="http://www.ptt.cc/bbs/Gossiping/index.html">返回看板</a>
		<div class="bar"></div>
		<div class="share">
			<span>分享</span>
			<div class="fb-like" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false" data-href="http://www.ptt.cc/bbs/Gossiping/M.1513576988.A.940.html"></div>

			<div class="g-plusone" data-size="medium"></div>
<script type="text/javascript">
window.___gcfg = {lang: 'zh-TW'};
(function() {
var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
po.src = 'https://apis.google.com/js/plusone.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
</script>

		</div>
	</div>
</div>
<div id="main-container">
    <div id="main-content" class="bbs-screen bbs-content"><div class="article-metaline"><span class="article-meta-tag">作者</span><span class="article-meta-value">KILLE (啃)</span></div><div class="article-metaline-right"><span class="article-meta-tag">看板</span><span class="article-meta-value">Gossiping</span></div><div class="article-metaline"><span class="article-meta-tag">標題</span><span class="article-meta-value">Re: [問卦] C語言沒人用goto?</span></div><div class="article-metaline"><span class="article-meta-tag">時間</span><span class="article-meta-value">Mon Dec 18 14:03:05 2017</span></div>

        這文有點久 講下本人經驗

        若你代碼 有很多初始化與階斷性處理

        那就用goto吧

        ex:

狀態 搖桿已初始 = 否;

void 搖桿驅動初始化()
{
        if(無== 確認裝置是否存在())
          goto 搖桿無效;

        if(是 == 搖桿是否太小())
          goto 搖桿無效;

        if(無 == 有無庫存())
          goto 搖桿無效;

        if(失敗 == 啟用電腦())
         goto 搖桿無效;

        if(找不到 == 尋找日本片())
          goto 關閉電腦;

        if(是 == 有無穿褲())
          脫褲();

        if(痛 == 稍摸搖桿())
        {
            /* 嚴重錯誤 直接跳出 */
            return;
        }

        /*初始化已完成*/
        搖桿已初始 = 是;
        return;

關閉電腦:
        關電腦()             ;

搖桿無效:

        搖桿已初始 = 否;
        return;
}



 若是真的不想用goto 也可以用do while(0);

void 搖桿驅動初始化()
{

        do
        {
        if(無== 確認裝置是否存在())
          break;

        if(是 == 搖桿是否太小())
          break;

        if(無 == 有無庫存())
          break;

        if(失敗 == 啟用電腦())
           break;

        if(找不到 == 尋找日本片())
          break;


        if(是 == 有無穿褲())
          脫褲();

        /*初始化已完成*/
        搖桿已初始 = 是;
        return;


        }while(0);

        if(是 == 電腦已開啟())
                關電腦();
    搖桿已初始 = 否;
    return;
}



用do while(0) 不會比較好 只是避開goto爾

簡單講 若是要層層檢查 失敗若要處理一堆

那就大方用下去吧 用goto代碼不會比較難維護

反是用do..while(0)是在裝神弄鬼



<span class="f2">※ 引述《bencert (根本ㄏㄏ)》之銘言：
</span><span class="f6">: 小弟我剛剛想起來
</span><span class="f6">: C語言有種用法是goto
</span><span class="f6">: 但是上程式設計的課老師也跳過不教
</span><span class="f6">: 我看也沒人用過goto
</span><span class="f6">: 有沒有C語言GOTO的八卦?
</span><span class="f6">: -----
</span><span class="f6">: Sent from JPTT on my Samsung SM-G930F.
</span>
--
<span class="f2">※ 發信站: 批踢踢實業坊(ptt.cc), 來自: 114.136.60.48
</span><span class="f2">※ 文章網址: <a href="https://www.ptt.cc/bbs/Gossiping/M.1513576988.A.940.html" target="_blank" rel="nofollow">https://www.ptt.cc/bbs/Gossiping/M.1513576988.A.940.html</a>
</span><span class="f2">※ 編輯: KILLE (114.136.60.48), 12/18/2017 14:06:17
</span><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">mengertsai</span><span class="f3 push-content">: 看搖桿就知道下面是什麼劇情了</span><span class="push-ipdatetime"> 12/18 14:03
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">lolic</span><span class="f3 push-content">: 沒錯 就是這樣</span><span class="push-ipdatetime"> 12/18 14:04
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">KangSuat</span><span class="f3 push-content">: goto wentto hadgoneto</span><span class="push-ipdatetime"> 12/18 14:05
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">amyforestry</span><span class="f3 push-content">: 各種神人</span><span class="push-ipdatetime"> 12/18 14:05
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">galic</span><span class="f3 push-content">: 文章都不見了還能回XD</span><span class="push-ipdatetime"> 12/18 14:05
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">a828203</span><span class="f3 push-content">: 寫程式用goto會被噓吧?</span><span class="push-ipdatetime"> 12/18 14:06
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">w113353</span><span class="f3 push-content">: 你這篇等很久吼</span><span class="push-ipdatetime"> 12/18 14:06
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">shadow0326</span><span class="f3 push-content">: 完全可以拆成 if (搖桿無效嗎 ()) 喔幹();</span><span class="push-ipdatetime"> 12/18 14:07
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">iamchyun</span><span class="f3 push-content">: 學校很多老師愛說幹話 goto就是有他好用的地方</span><span class="push-ipdatetime"> 12/18 14:07
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">shadow0326</span><span class="f3 push-content">: 判斷式通通塞到 搖桿無效嗎()  goto通通改return true</span><span class="push-ipdatetime"> 12/18 14:07
</span></div>        不行 要錯誤處理  好比穿褲 吃藥這類
<span class="f2">※ 編輯: KILLE (114.136.60.48), 12/18/2017 14:08:46
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">ms6163</span><span class="f3 push-content">: Windows跟Linux kernel一堆goto 要噓？</span><span class="push-ipdatetime"> 12/18 14:08
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">galic</span><span class="f3 push-content">: <a href="https://github.com/torvalds/linux/search?q=goto" target="_blank" rel="nofollow">https://github.com/torvalds/linux/search?q=goto</a></span><span class="push-ipdatetime"> 12/18 14:08
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">shadow0326</span><span class="f3 push-content">: 錯誤處理通通塞到 喔幹()</span><span class="push-ipdatetime"> 12/18 14:09
</span></div>        不同層度的錯誤怎能統一處理?

        穿褲與關電腦就完全不一樣啊
<span class="f2">※ 編輯: KILLE (114.136.60.48), 12/18/2017 14:10:03
</span><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">shadow0326</span><span class="f3 push-content">: 就用喔幹(int 錯誤類型)啊 何難之有</span><span class="push-ipdatetime"> 12/18 14:11
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">vowpool</span><span class="f3 push-content">: 程式碼優化就禁用GOTO還有return也不能亂用 根本強人所難</span><span class="push-ipdatetime"> 12/18 14:11
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">vowpool</span><span class="f3 push-content">: Guard Clauses明明就很好用</span><span class="push-ipdatetime"> 12/18 14:13
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">MADAOTW</span><span class="f3 push-content">: 我是沒路走的時候才會goto</span><span class="push-ipdatetime"> 12/18 14:14
</span></div>        不可能沒路走

        我文重點是 do ...while(0) 可以完全取代 goto

        只是這樣代碼反變冗 沒意義
<span class="f2">※ 編輯: KILLE (114.136.60.48), 12/18/2017 14:15:37
</span><div class="push"><span class="f1 hl push-tag">噓 </span><span class="f3 hl push-userid">as80110680</span><span class="f3 push-content">: 代碼 ==</span><span class="push-ipdatetime"> 12/18 14:16
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">hijkxyzuw</span><span class="f3 push-content">: 可以用 switch ，或把搖桿無效寫成函數，</span><span class="push-ipdatetime"> 12/18 14:17
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">hijkxyzuw</span><span class="f3 push-content">: `goto 搖桿無效;` 變成 `return 搖桿無效();`</span><span class="push-ipdatetime"> 12/18 14:18
</span></div>        冗度大增 比do..while(0) 更慘
<span class="f2">※ 編輯: KILLE (114.136.60.48), 12/18/2017 14:18:54
</span><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">efairy</span><span class="f3 push-content">: 用goto 最後根本不知道跑到哪</span><span class="push-ipdatetime"> 12/18 14:20
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">vowpool</span><span class="f3 push-content">: 有錯誤就goto 跟檢查完全部錯誤才執行 速度上有差</span><span class="push-ipdatetime"> 12/18 14:21
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">k8</span><span class="f3 push-content">: 就跑到最後面，準備離開此函數。不是這種作法就不是goto業務</span><span class="push-ipdatetime"> 12/18 14:26
</span></div><div class="push"><span class="f1 hl push-tag">→ </span><span class="f3 hl push-userid">cerwvk</span><span class="f3 push-content">: goto很好用啊. 看人.</span><span class="push-ipdatetime"> 12/18 14:27
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">hijkxyzuw</span><span class="f3 push-content">: 你的冗度是指程式碼變很長還是效率變很差？</span><span class="push-ipdatetime"> 12/18 15:04
</span></div><div class="push"><span class="hl push-tag">推 </span><span class="f3 hl push-userid">bitcch</span><span class="f3 push-content">: 很典型的goto用法</span><span class="push-ipdatetime"> 12/18 15:07
</span></div><div class="push"><span class="f1 hl push-tag">噓 </span><span class="f3 hl push-userid">GreenBow</span><span class="f3 push-content">: 支那人?</span><span class="push-ipdatetime"> 12/18 15:35
</span></div></div>
    
    <div id="article-polling" data-pollurlhref="http://www.ptt.cc/poll/Gossiping/M.1513576988.A.940.html?cacheKey=2116-38316470&offset=5215&offset-sig=d35e4d786b768214e791a16368ac4945be4a4805" data-longpollurl="/v1/longpoll?id=38eab1c63ead13734e84409a875afa8159e9f582" data-offset="5215"></div>
    

    
<div class="bbs-screen bbs-footer-message">本網站已依台灣網站內容分級規定處理。此區域為限制級，未滿十八歲者不得瀏覽。</div>

</div>

		

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32365737-1', {
    cookieDomain: 'ptt.cc',
    legacyCookieDomain: 'ptt.cc'
  });
  ga('send', 'pageview');
</script>


		
<script src="jquery.min.js"></script>
<script src="script>

    </body>
</html>
